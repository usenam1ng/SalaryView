# SalaryView — сервис просмотра зарплаты сотрудников

## Описание

**SalaryView** — это REST-сервис на FastAPI для просмотра текущей зарплаты и даты следующего повышения. Каждый сотрудник может видеть только свою зарплату. Для безопасности реализована авторизация по JWT-токену.

---

## Быстрый старт

1. **Клонируйте репозиторий и перейдите в папку проекта:**
   ```bash
   git clone <ваш-репозиторий>
   cd SalaryView
   ```
2. **Создайте и активируйте виртуальное окружение (рекомендуется):**
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```
3. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```
4. **Запустите сервер:**
   ```bash
   uvicorn main:app --reload
   ```
5. **Откройте документацию:**
   - Swagger UI: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)

---

## Основные возможности

- Регистрация пользователя
- Авторизация и получение JWT-токена
- Просмотр своей зарплаты и даты следующего повышения (только для авторизованных пользователей)

---

## Описание API

### 1. Регистрация
**POST** `/users/register`

**Тело запроса:**
```json
{
  "username": "ivan",
  "password": "1234",
  "salary": 50000,
  "update_salary_at": "2024-12-01"
}
```
**Ответ:**
```json
{
  "ok": true,
  "user_id": 1
}
```

### 2. Авторизация (получение токена)
**POST** `/users/login`

**Тело запроса:**
```json
{
  "username": "ivan",
  "password": "1234"
}
```
**Ответ:**
```json
{
  "access_token": "<ваш_токен>",
  "token_type": "bearer"
}
```

### 3. Получение информации о зарплате
**GET** `/users/me/salary`

**Требуется авторизация!**

В Swagger UI нажмите "Authorize" (замочек), вставьте токен в формате:
```
Bearer <ваш_токен>
```

**Ответ:**
```json
{
  "id": 1,
  "username": "ivan",
  "salary": 50000,
  "update_salary_at": "2024-12-01"
}
```

---

## Особенности и рекомендации

- **Безопасность:** Каждый сотрудник видит только свою зарплату. Доступ к данным строго по JWT-токену.
- **Токен:** Получайте токен через `/users/login` и вставляйте его в поле Authorize (Swagger UI) или в заголовок `Authorization` ваших запросов.
- **Swagger UI:** Для авторизации используйте только поле Bearer-токена (замочек справа вверху).
- **Пароли:** Хранятся в базе только в захешированном виде.

---

## Примеры запросов

### Получить токен через curl
```bash
curl -X POST http://127.0.0.1:8000/users/login \
  -H "Content-Type: application/json" \
  -d '{"username": "ivan", "password": "1234"}'
```

### Получить зарплату через curl
```bash
curl -X GET http://127.0.0.1:8000/users/me/salary \
  -H "Authorization: Bearer <ваш_токен>"
```

---

## Лицензия

MIT 